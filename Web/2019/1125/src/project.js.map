{"version":3,"sources":["assets/main.ts"],"names":["_a","cc","_decorator","ccclass","NewClass","property","_super","_this","apply","this","arguments","Room109","Room120","listRoom109","listRoom120","curIndex","curType","bar","btnBarBack","btnBarNext","listBarPersimmons","__extends","prototype","changeBarSize","sca","view","getScaleX","scaleX","scaleY","y","winSize","height","start","find","x","on","getComponent","Toggle","reset","c","getChildByName","Node","EventType","TOUCH_END","changeRoom","window","startFind","bind","active","uncheck","type","list","num","Math","floor","i","length","check","console","log","__decorate","Component","exports","default"],"mappings":"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","sourcesContent":["// Learn TypeScript:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/typescript.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/typescript.html\r\n// Learn Attribute:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/life-cycle-callbacks.html\r\n\r\nconst { ccclass, property } = cc._decorator;\r\n\r\n@ccclass\r\nexport default class NewClass extends cc.Component {\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    // onLoad () {}\r\n    Room109: cc.Node = null;\r\n    Room120: cc.Node = null;\r\n    listRoom109: cc.Node[] = null;\r\n    listRoom120: cc.Node[] = null;\r\n    curIndex = 0;\r\n    curType = 0;\r\n    bar: cc.Node = null;\r\n    btnBarBack: cc.Node = null;\r\n    btnBarNext: cc.Node = null;\r\n    listBarPersimmons: cc.Toggle[] = null;\r\n    changeBarSize() {\r\n        let bar = this.bar;\r\n        let sca = 1 / cc.view.getScaleX()\r\n        bar.scaleX = sca\r\n        bar.scaleY = sca\r\n        bar.y = -1 * cc.winSize.height / 2 + bar.height * sca / 2\r\n    }\r\n    start() {\r\n        let btnBackTop: cc.Node = cc.find('Canvas/btnBackIndexTop');\r\n        this.btnBarBack = cc.find('Canvas/Bar/btnBack');\r\n        this.btnBarNext = cc.find('Canvas/Bar/btnNext');\r\n\r\n        this.Room109 = cc.find(\"Canvas/scrollview/view/room/map109\");\r\n        this.Room120 = cc.find(\"Canvas/scrollview/view/room/map120\");\r\n        this.bar = cc.find(\"Canvas/Bar\")\r\n        this.changeBarSize()\r\n        cc.find(\"Canvas\").on(\"size-changed\", ()=>{\r\n            this.changeBarSize()\r\n        })\r\n\r\n        this.listRoom109 = [\r\n            cc.find(\"Canvas/scrollview/view/room/map109/109-img1\"),\r\n            cc.find(\"Canvas/scrollview/view/room/map109/109-bg1\"),\r\n            cc.find(\"Canvas/scrollview/view/room/map109/109-img2\"),\r\n            cc.find(\"Canvas/scrollview/view/room/map109/109-bg2\"),\r\n            cc.find(\"Canvas/scrollview/view/room/map109/109-img3\"),\r\n            cc.find(\"Canvas/scrollview/view/room/map109/109-bg3\"),\r\n            cc.find(\"Canvas/scrollview/view/room/map109/109-img4\"),\r\n            cc.find(\"Canvas/scrollview/view/room/map109/109-bg4\"),\r\n        ]\r\n\r\n        this.listRoom120 = [\r\n            cc.find(\"Canvas/scrollview/view/room/map120/120-img1\"),\r\n            cc.find(\"Canvas/scrollview/view/room/map120/120-bg1\"),\r\n            cc.find(\"Canvas/scrollview/view/room/map120/120-img2\"),\r\n            cc.find(\"Canvas/scrollview/view/room/map120/120-bg2\"),\r\n            cc.find(\"Canvas/scrollview/view/room/map120/120-img3\"),\r\n            cc.find(\"Canvas/scrollview/view/room/map120/120-bg3\"),\r\n            cc.find(\"Canvas/scrollview/view/room/map120/120-img4\"),\r\n            cc.find(\"Canvas/scrollview/view/room/map120/120-bg4\"),\r\n        ]\r\n\r\n        this.listBarPersimmons = [\r\n            cc.find(\"Canvas/Bar/persimmon1\").getComponent(cc.Toggle),\r\n            cc.find(\"Canvas/Bar/persimmon2\").getComponent(cc.Toggle),\r\n            cc.find(\"Canvas/Bar/persimmon3\").getComponent(cc.Toggle),\r\n            cc.find(\"Canvas/Bar/persimmon4\").getComponent(cc.Toggle)\r\n        ]\r\n        this.reset()\r\n\r\n        for (var x in this.listRoom109) {\r\n\r\n            let c = this.listRoom109[x].getChildByName(\"click\");\r\n            c && c.on(cc.Node.EventType.TOUCH_END, () => {\r\n                this.changeRoom();\r\n            })\r\n        }\r\n\r\n        for (var x in this.listRoom120) {\r\n\r\n            let c = this.listRoom120[x].getChildByName(\"click\");\r\n            c && c.on(cc.Node.EventType.TOUCH_END, () => {\r\n                this.changeRoom();\r\n            })\r\n\r\n        }\r\n\r\n        this.btnBarBack.on(cc.Node.EventType.TOUCH_END, () => {\r\n            window[\"xxxbtnbackIndex\"]()\r\n            this.reset();\r\n        })\r\n        this.btnBarNext.on(cc.Node.EventType.TOUCH_END, () => {\r\n            this.changeRoom();\r\n        })\r\n\r\n\r\n        // setTimeout(() => {\r\n        //     this.startFind(109)\r\n        // }, 1000);\r\n        window[\"xxxstartFind\"] = this.startFind.bind(this);\r\n\r\n\r\n    }\r\n\r\n\r\n    reset() {\r\n        this.Room109.active = false\r\n        this.Room120.active = false\r\n        for (var x in this.listRoom109) {\r\n            this.listRoom109[x].active = false\r\n        }\r\n\r\n        for (var x in this.listRoom120) {\r\n            this.listRoom120[x].active = false\r\n        }\r\n        this.curIndex = 0;\r\n        this.curType = 0;\r\n\r\n        for (var x in this.listBarPersimmons) {\r\n            this.listBarPersimmons[x].uncheck();\r\n        }\r\n\r\n        this.btnBarBack.active = true;\r\n        this.btnBarNext.active = false;\r\n    }\r\n\r\n    startFind(type: number) {\r\n        this.reset();\r\n        this.curType = type;\r\n        this.changeRoom();\r\n    }\r\n    changeRoom() {\r\n        let list = this.curType == 109 ? this.listRoom109 : this.listRoom120\r\n        this.Room109.active = this.curType == 109;\r\n        this.Room120.active = this.curType == 120;\r\n\r\n        for (var x in this.listRoom109) {\r\n            this.listRoom109[x].active = false\r\n        }\r\n\r\n        for (var x in this.listRoom120) {\r\n            this.listRoom120[x].active = false\r\n        }\r\n        if (this.curIndex % 2 == 0) {\r\n            this.btnBarBack.active = true;\r\n            this.btnBarNext.active = false;\r\n        } else {\r\n            this.btnBarBack.active = false;\r\n            this.btnBarNext.active = true;\r\n        }\r\n\r\n        list[this.curIndex++].active = true\r\n        let num = Math.floor(this.curIndex / 2);\r\n\r\n        for (var i = 0; i < this.listBarPersimmons.length; i++) {\r\n            if (i < num)\r\n                this.listBarPersimmons[i].check()\r\n            else\r\n                this.listBarPersimmons[i].uncheck()\r\n        }\r\n\r\n        if(this.curIndex > 7){\r\n            this.btnBarBack.active = true;\r\n            this.btnBarNext.active = false;\r\n            console.log('结束游戏')\r\n            window[\"xxxgetPresent\"]();\r\n        }\r\n\r\n    }\r\n\r\n    // update (dt) {}\r\n}\r\n"],"file":"project.js"}